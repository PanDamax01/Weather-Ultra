const btn=document.querySelector(".toolbar__search"),background=document.querySelectorAll(".wrapper"),switchBtn=document.querySelector(".toolbar__switch"),btnClose=document.querySelector(".popup__btn--close"),btnSearch=document.querySelector(".popup__btn--send"),popup=document.querySelector(".popup"),input=document.querySelector(".popup__input"),searchText=document.querySelector(".search-text"),btnSvg=document.querySelector(".popup__svg"),errorModal=document.querySelector(".error"),errorText=document.querySelector(".error__text"),errorBtn=document.querySelector(".error__x"),cityRegex=/^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$/;let theme=localStorage.getItem("theme");"dark"===theme?document.body.classList.add("dark"):document.body.classList.add("light");const addBlur=()=>{background.forEach(e=>e.classList.add("blur"))},removeBlur=()=>{background.forEach(e=>e.classList.remove("blur"))},resetPopup=()=>{popup.style.transform="",input.value=""},openPopup=()=>{btnSearch.classList.remove("antyspam"),popup.style.transform="translate(-50%,-50%)",addBlur()},closePopup=e=>{!btnClose.contains(e.target)&&e.target!==document.body||(resetPopup(),removeBlur())},resetAnimation=()=>{popup.classList.remove("move-shake"),input.classList.remove("add-red"),searchText.style.visibility="visible",btnSvg.classList.remove("move-left")},animateBtnSearch=()=>{btnSearch.style.backgroundColor="rgb(108, 249, 108)",btnSvg.classList.add("move-left"),searchText.style.visibility="hidden"},send=()=>{btnSearch.style.backgroundColor="rgb(255, 255, 255)",resetAnimation(),removeBlur(),resetPopup()},animeteError=()=>{openModalErr(),popup.classList.add("move-shake"),input.classList.add("add-red"),setTimeout(closeModalErr,2e4),setTimeout(resetAnimation,1200)},openModalErr=()=>{errorModal.style.transform="translate(-50%,0)"},closeModalErr=()=>{errorModal.style.transform="translate(-50%, -100px)"},checkButton=()=>{animateBtnSearch(),setTimeout(function(){(""!==input.value||btnSearch.classList.contains("antyspam")?cityRegex.test(input.value)||btnSearch.classList.contains("antyspam")?(btnSearch.classList.add("antyspam"),send):(errorText.textContent="Błąd: Źle wprowadzona miejscowość!",animeteError):(errorText.textContent="Błąd: Nie wprowadzono treści!",animeteError))()},1e3)},setDarkMode=()=>{theme="dark"===theme?(document.body.classList.remove("dark"),document.body.classList.add("light"),"light"):(document.body.classList.remove("light"),document.body.classList.add("dark"),"dark"),localStorage.setItem("theme",theme)};function eventsDOM(){btn.addEventListener("click",openPopup),switchBtn.addEventListener("click",setDarkMode),btnClose.addEventListener("click",closePopup),document.body.addEventListener("click",closePopup),btnSearch.addEventListener("click",checkButton),input.addEventListener("keyup",e=>13===e.keyCode?checkButton():null),errorBtn.addEventListener("click",closeModalErr)}function setTime(){var e=new Date,t=e.getDate(),e=e.getMonth()+1;function r(e){return(""+e).padStart(2,"0")}document.querySelector(".main-info__date").textContent=r(t)+"."+r(e),setInterval(function(){var e=r((e=new Date).getHours())+":"+r(e.getMinutes());document.querySelector(".main-info__time").textContent=e},1e3)}function checkCityApi(){errorText.textContent="Błąd: Nie ma takiej miejscowości!",openModalErr(),setTimeout(closeModalErr,2e4)}function events(){eventsDOM(),setTime()}(()=>{const t=()=>{"Krystian"!==input.value&&"krystian"!==input.value||(document.querySelector(".special").style.transform="translateY(0)")};btnSearch.addEventListener("click",t),input.addEventListener("keyup",e=>13===e.keyCode?t():null)})();export{checkCityApi,events};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50c0RPTS5qcyJdLCJuYW1lcyI6WyJidG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiYWNrZ3JvdW5kIiwicXVlcnlTZWxlY3RvckFsbCIsInN3aXRjaEJ0biIsImJ0blNlYXJjaCIsInBvcHVwIiwiaW5wdXQiLCJzZWFyY2hUZXh0IiwiZXJyb3JNb2RhbCIsImVycm9yVGV4dCIsImNpdHlSZWdleCIsInRoZW1lIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNsYXNzTGlzdCIsImxldCIsImJvZHkiLCJhZGQiLCJhZGRCbHVyIiwicmVzZXRQb3B1cCIsImVsIiwicmVtb3ZlQmx1ciIsImZvckVhY2giLCJyZW1vdmUiLCJzdHlsZSIsInRyYW5zZm9ybSIsImNsb3NlUG9wdXAiLCJvcGVuUG9wdXAiLCJyZXNldEFuaW1hdGlvbiIsInZpc2liaWxpdHkiLCJidG5DbG9zZSIsImUiLCJ0YXJnZXQiLCJhbmltYXRlQnRuU2VhcmNoIiwiYmFja2dyb3VuZENvbG9yIiwiYW5pbWV0ZUVycm9yIiwib3Blbk1vZGFsRXJyIiwic2V0VGltZW91dCIsIndhaXRpbmciLCJ2YWx1ZSIsInRleHRDb250ZW50IiwiY2xvc2VNb2RhbEVyciIsImNoZWNrQnV0dG9uIiwiY29udGFpbnMiLCJ0ZXN0Iiwic2VuZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlcnJvckJ0biIsInNldFRpbWUiLCJkYXkiLCJnZXREYXRlIiwibW91bnRoIiwibm93IiwiZ2V0TW9udGgiLCJzZXRJdGVtIiwicGFkU3RhcnQiLCJldmVudHNET00iLCJseiIsImdldEhvdXJzIiwic2V0RGFya01vZGUiLCJzZXRJbnRlcnZhbCIsInRpbWUiLCJldmVudCIsImtleUNvZGUiLCJEYXRlIiwiZXZlbnRzIiwiaSIsImhlaGUiLCJnZXRNaW51dGVzIiwidGV4dFRpbWUiLCJjaGVja0NpdHlBcGkiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQU1DLFNBQVNDLGNBQWMsa0JBQWtCLEVBQy9DQyxX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QUNaLEVBRUEsS0FDSSxNQUFNbUIsRUFBT0EsS0FDVyxhQUFoQjdELE1BQU1pQyxPQUF3QyxhQUFoQmpDLE1BQU1pQyxRQUNwQ3hDLFNBQVNDLGNBQWMsVUFBVSxFQUFFd0IsTUFBTUMsVUFBWSxnQkFFN0QsRUFDQXJCLFVBQVUwQyxpQkFBaUIsUUFBU3FCLENBQUksRUFDeEM3RCxNQUFNd0MsaUJBQWlCLFFBQVNnQixHQUEyQixLQUFsQkEsRUFBTUMsUUFBaUJJLEVBQUssRUFBRSxJQUFJLENBQzlFLEdBQUUsU0FuQmFHLGFBTUFMLE1BYVoiLCJmaWxlIjoiZXZlbnRzRE9NLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b29sYmFyX19zZWFyY2gnKVxyXG5jb25zdCBiYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndyYXBwZXInKVxyXG5jb25zdCBzd2l0Y2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9vbGJhcl9fc3dpdGNoJylcclxuXHJcbmNvbnN0IGJ0bkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4tLWNsb3NlJylcclxuY29uc3QgYnRuU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4tLXNlbmQnKVxyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpXHJcbmNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dCcpXHJcblxyXG5jb25zdCBzZWFyY2hUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC10ZXh0JylcclxuY29uc3QgYnRuU3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdmcnKVxyXG5cclxuY29uc3QgZXJyb3JNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpXHJcbmNvbnN0IGVycm9yVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcl9fdGV4dCcpXHJcbmNvbnN0IGVycm9yQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yX194JylcclxuY29uc3QgY2l0eVJlZ2V4ID0gL15bYS16QS1aXFx1MDA4MC1cXHUwMjRGXFxzXFwvXFwtXFwpXFwoXFxgXFwuXFxcIlxcJ10rJC9cclxubGV0IHRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJylcclxuXHJcbmlmICh0aGVtZSA9PT0gJ2RhcmsnKSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2RhcmsnKVxyXG59IGVsc2V7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xpZ2h0JylcclxufVxyXG5cclxuY29uc3QgYWRkQmx1ciA9ICgpID0+IHtcclxuICAgIGJhY2tncm91bmQuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QuYWRkKCdibHVyJykpXHJcbn1cclxuXHJcbmNvbnN0IHJlbW92ZUJsdXIgPSAoKSA9PiB7XHJcbiAgICBiYWNrZ3JvdW5kLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnYmx1cicpKVxyXG59XHJcblxyXG5jb25zdCByZXNldFBvcHVwID0gKCkgPT4ge1xyXG4gICAgcG9wdXAuc3R5bGUudHJhbnNmb3JtID0gJyc7XHJcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG59XHJcblxyXG5cclxuY29uc3Qgb3BlblBvcHVwID0gKCkgPT4ge1xyXG4gICAgYnRuU2VhcmNoLmNsYXNzTGlzdC5yZW1vdmUoJ2FudHlzcGFtJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBwb3B1cC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsLTUwJSknXHJcbiAgICBhZGRCbHVyKClcclxufVxyXG5jb25zdCBjbG9zZVBvcHVwID0gZSA9PiB7XHJcbiAgICBpZiggYnRuQ2xvc2UuY29udGFpbnMoZS50YXJnZXQpIHx8IGUudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KXtcclxuICAgICAgICByZXNldFBvcHVwKClcclxuICAgICAgICByZW1vdmVCbHVyKClcclxufX1cclxuXHJcbmNvbnN0IHJlc2V0QW5pbWF0aW9uID0gKCkgPT4ge1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnbW92ZS1zaGFrZScpXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdhZGQtcmVkJylcclxuICAgIHNlYXJjaFRleHQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xyXG4gICAgYnRuU3ZnLmNsYXNzTGlzdC5yZW1vdmUoJ21vdmUtbGVmdCcpXHJcbn1cclxuXHJcbmNvbnN0IGFuaW1hdGVCdG5TZWFyY2ggPSAoKSA9PiB7XHJcbiAgICBidG5TZWFyY2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYigxMDgsIDI0OSwgMTA4KSdcclxuICAgIGJ0blN2Zy5jbGFzc0xpc3QuYWRkKCdtb3ZlLWxlZnQnKVxyXG4gICAgc2VhcmNoVGV4dC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbidcclxufVxyXG5cclxuY29uc3Qgc2VuZCA9ICgpID0+IHtcclxuICAgIGJ0blNlYXJjaC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKDI1NSwgMjU1LCAyNTUpJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgcmVzZXRBbmltYXRpb24oKVxyXG4gICAgcmVtb3ZlQmx1cigpXHJcbiAgICByZXNldFBvcHVwKClcclxufVxyXG5cclxuY29uc3QgYW5pbWV0ZUVycm9yID0gKCkgPT4ge1xyXG4gICAgb3Blbk1vZGFsRXJyKClcclxuICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ21vdmUtc2hha2UnKVxyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnYWRkLXJlZCcpXHJcbiAgICBzZXRUaW1lb3V0KGNsb3NlTW9kYWxFcnIsIDIwXzAwMClcclxuICAgIHNldFRpbWVvdXQocmVzZXRBbmltYXRpb24sIDEyMDApXHJcbn1cclxuXHJcbmNvbnN0IG9wZW5Nb2RhbEVyciA9ICgpID0+IHtcclxuICAgIGVycm9yTW9kYWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLDApJ1xyXG59XHJcbmNvbnN0IGNsb3NlTW9kYWxFcnIgPSAoKSA9PiB7XHJcbiAgICBlcnJvck1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTEwMHB4KSdcclxufVxyXG5cclxuY29uc3QgY2hlY2tCdXR0b24gPSAoKSA9PiB7XHJcbiAgICBhbmltYXRlQnRuU2VhcmNoKClcclxuICAgIHNldFRpbWVvdXQod2FpdGluZywgMTAwMClcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gd2FpdGluZygpIHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09ICcnICYmICFidG5TZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKCdhbnR5c3BhbScpKSB7XHJcbiAgICAgICAgICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICdCxYLEhWQ6IE5pZSB3cHJvd2Fkem9ubyB0cmXFm2NpISdcclxuICAgICAgICAgICAgYW5pbWV0ZUVycm9yKCkgIFxyXG4gICAgICAgIH0gZWxzZSBpZighY2l0eVJlZ2V4LnRlc3QoaW5wdXQudmFsdWUpICYmICFidG5TZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKCdhbnR5c3BhbScpKXtcclxuICAgICAgICAgICAgZXJyb3JUZXh0LnRleHRDb250ZW50ID0gJ0LFgsSFZDogxblsZSB3cHJvd2Fkem9uYSBtaWVqc2Nvd2/Fm8SHISdcclxuICAgICAgICAgICAgYW5pbWV0ZUVycm9yKClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgYnRuU2VhcmNoLmNsYXNzTGlzdC5hZGQoJ2FudHlzcGFtJylcclxuICAgICAgICAgICAgc2VuZCgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzZXREYXJrTW9kZSA9ICgpID0+IHtcclxuICAgIC8vIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnZGFyaycpXHJcbiAgICBpZiAodGhlbWUgPT09ICdkYXJrJykge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRhcmtcIilcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJsaWdodFwiKVxyXG4gICAgICAgIHRoZW1lID0gJ2xpZ2h0J1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJsaWdodFwiKVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImRhcmtcIilcclxuICAgICAgICB0aGVtZSA9ICdkYXJrJ1xyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgdGhlbWUpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV2ZW50c0RPTSgpe1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwKVxyXG4gICAgc3dpdGNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0RGFya01vZGUpXHJcbiAgICBidG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlUG9wdXApXHJcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cClcclxuICAgIGJ0blNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrQnV0dG9uKVxyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldmVudCA9PiBldmVudC5rZXlDb2RlID09PSAxMyA/IGNoZWNrQnV0dG9uKCk6bnVsbClcclxuICAgIGVycm9yQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbEVycilcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VGltZSgpe1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgY29uc3QgZGF5ID0gbm93LmdldERhdGUoKVxyXG4gICAgY29uc3QgbW91bnRoID0gbm93LmdldE1vbnRoKCkgKyAxXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1pbmZvX19kYXRlJykudGV4dENvbnRlbnQgPSBgJHtseihkYXkpfS4ke2x6KG1vdW50aCl9YFxyXG5cclxuICAgIGZ1bmN0aW9uIGx6KGkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgZnVuY3Rpb24gdGltZSgpIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHRleHRUaW1lID0gYCR7bHoobm93LmdldEhvdXJzKCkpfToke2x6KG5vdy5nZXRNaW51dGVzKCkpfWA7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4taW5mb19fdGltZScpLnRleHRDb250ZW50ID0gdGV4dFRpbWVcclxuICAgIH07XHJcbiAgICBzZXRJbnRlcnZhbCh0aW1lLCAxMDAwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ2l0eUFwaSgpe1xyXG4gICAgZXJyb3JUZXh0LnRleHRDb250ZW50ID0gJ0LFgsSFZDogTmllIG1hIHRha2llaiBtaWVqc2Nvd2/Fm2NpISdcclxuICAgIG9wZW5Nb2RhbEVycigpXHJcbiAgICBzZXRUaW1lb3V0KGNsb3NlTW9kYWxFcnIsIDIwXzAwMClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV2ZW50cygpe1xyXG4gICAgZXZlbnRzRE9NKClcclxuICAgIHNldFRpbWUoKVxyXG59XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgY29uc3QgaGVoZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09ICdLcnlzdGlhbicgfHwgaW5wdXQudmFsdWUgPT09ICdrcnlzdGlhbicpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNwZWNpYWwnKS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBidG5TZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoZWhlKVxyXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldmVudCA9PiBldmVudC5rZXlDb2RlID09PSAxMyA/IGhlaGUoKTpudWxsKVxyXG59KSgpOyJdfQ==
